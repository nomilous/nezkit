// Generated by CoffeeScript 1.4.0
var set;

module.exports = set = {
  series: function(opts, callback) {
    var args, arrays, required, results, target, targets, _i, _j, _k, _len, _len1, _len2, _ref, _ref1;
    if (opts == null) {
      opts = {};
    }
    _ref = ['targets', 'function', 'args'];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      required = _ref[_i];
      if (typeof opts[required] === 'undefined') {
        throw new Error("missing opts." + required + " in set.series(opts, cb)");
      }
    }
    _ref1 = ['targets', 'args'];
    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
      arrays = _ref1[_j];
      if (!(opts[arrays] instanceof Array)) {
        throw new Error("opts.targets should be array");
      }
    }
    return;
    targets = [];
    results = [];
    if (!args) {
      args = [];
    }
    for (_k = 0, _len2 = targetsArray.length; _k < _len2; _k++) {
      target = targetsArray[_k];
      targets.push(target);
    }
    args.push(function(error, result) {
      if (typeof stepCallback === 'function') {
        stepCallback(error, result);
      }
      if (error) {
        finalCallback(error, results);
        return;
      }
      results.push(result);
      return set.recurse(results, targets, functionName, args, finalCallback);
    });
    return set.recurse(results, targets, functionName, args, finalCallback);
  },
  recurse: function(results, targets, fname, args, finalCallback) {
    var target;
    target = targets.shift();
    if (!target) {
      finalCallback(null, results);
      return;
    }
    return target[fname].apply(target, args);
  }
};
